<script>
  const API_BASE = "https://inidan-finder-production.up.railway.app";

  async function handleSubmit(event) {
    event.preventDefault();

    const mediaType = document.getElementById("mediaType").value;
    const src = document.getElementById("src").value.trim();
    const title = document.getElementById("title").value.trim();
    const wallet = document.getElementById("wallet").value.trim();
    const notes = document.getElementById("notes").value.trim();

    if (!src || !title) {
      alert("Please fill in title and media link!");
      return;
    }

    const payload = {
      mediaType,
      src,
      title,
      wallet: wallet || null,
      notes: notes || null
    };

    try {
      const res = await fetch(`${API_BASE}/api/submissions`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      if (!res.ok) {
        alert("Error submitting. Try again.");
        return;
      }

      alert("Fail submitted! We'll review soon üôèüòÇ");
      document.getElementById("submitForm").reset();
    } catch (err) {
      console.error(err);
      alert("Server error ‚Äî try again later.");
    }
  }

  document.getElementById("submitForm")
    .addEventListener("submit", handleSubmit);
</script>

